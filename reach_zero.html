<!DOCTYPE html>
<html>
    <head>
        <title>Reach zero</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="./static/styles/structure.css">
        <link rel="stylesheet" type="text/css" href="./static/styles/projects.css">
    </head>

    <div class="overlay"></div>

    <body>
        <header>
            <div class="header-text">Reach zero</div>
            <div class="header-buttons">
                <div class="outset header-buttons-bar-small"></div>
                <a class="outset base-button small" href="./index.html">
                    <div class="button-text">
                        Home
                    </div>
                </a>
                <div class="outset header-buttons-bar"></div>
            </div>
        </header>

        <main>
            <div class="outset window reach-one-window">
                <div class="reach-one-reset">
                    <input class="inset" id="new-number" type="number" value="1000">
                    <div class="outset base-button" onclick="resetNumber()">Reset</div>
                </div>
                <div class="inset previous-numbers" id="previous-numbers"></div>
                <div class="inset current-number" id="current-number">1000</div>
                <div class="outset base-button generate-button" id="reach-button" onclick="randomDecrease()">
                    Generate random number
                </div>
            </div>
        </main>

        <!-- <footer class="outset"></footer> -->
    </body>

    <script>
        function randomDecrease() {
            var currentNumber = document.getElementById('current-number').innerHTML;
            var newNumber = Math.round((Math.floor(Math.random() * currentNumber) + Math.round(Math.random() * currentNumber))/2);
            document.getElementById('previous-numbers').innerHTML += ` ${newNumber}`;
            document.getElementById('current-number').innerHTML = newNumber;


            if (newNumber == 0) {
                document.getElementsByClassName('overlay')[0].style.display = 'block';
                document.getElementById('reach-button').innerHTML = 'Reset number';
                document.getElementById('reach-button').onclick = resetNumber;
                setTimeout(function(){document.getElementsByClassName('overlay')[0].style.display = 'none';}, 3000);
            }
        }

        function resetNumber() {
            document.getElementById('previous-numbers').innerHTML = "";
            var val = document.getElementById('new-number').value;
            document.getElementById('current-number').innerHTML = val;
            document.getElementById('reach-button').innerHTML = 'Generate random number';
            document.getElementById('reach-button').onclick = randomDecrease;
        }
    </script>
</html>